{
    "inputs": {
        "sample_options": {
            "name": "Sample options",
            "description": "Parameters relating to the sample being analysed.",
            "advanced": false,
            "properties": {
                "samplesheet": {
                    "name": "Samples",
                    "type": "sample",
                    "pattern": "csv|xlsx",
                    "required": true,
                    "categories": ["CLIP"],
                    "description": "The samples to process.",
                    "csv": {
                        "group": {
                            "property": "",
                            "user_override": true,
                            "required": true
                        },
                        "replicate": {
                            "property": "",
                            "user_override": true,
                            "required": true
                        },
                        "fastq_1": {
                            "property": "input.1",
                            "user_override": false
                        },
                        "fastq_2": {
                            "property": "input.2",
                            "user_override": false
                        }
                    }
                }
            }
        },
        "genome_options": {
            "name": "Genome options",
            "description": "The genome being aligned to.",
            "advanced": false,
            "takes_genome": true,
            "properties": {
                "fasta": {
                    "name": "Genome FASTA",
                    "type": "file",
                    "pattern": "fasta|fa$",
                    "required": true,
                    "genome_file": "fasta",
                    "description": "A raw genome FASTA file."
                },
                "gtf": {
                    "name": "GTF",
                    "type": "file",
                    "pattern": "gtf",
                    "required": true,
                    "genome_file": "gtf",
                    "description": "An annotation for the genome."
                },
                "smrna_fasta": {
                    "name": "smRNA FASTA",
                    "type": "file",
                    "pattern": "fasta|fa$",
                    "required": true,
                    "genome_file": "fasta|fa$",
                    "description": "FASTA file to be mapped to before the genome file, typically containing rRNA and tRNA sequences."
                },
                "fasta_fai": {
                    "name": "Genome FASTA index",
                    "type": "file",
                    "pattern": "fai$",
                    "required": false,
                    "genome_output": {
                        "process": "PREPARE_PRIMARY_GENOME:CUSTOM_GETCHROMSIZES",
                        "filetype": "fai"
                    },
                    "description": "A genome FASTA file index generated by Samtools faidx."
                },
                "chrom_sizes": {
                    "name": "Genome chromosome lengths",
                    "type": "file",
                    "pattern": "sizes$",
                    "required": false,
                    "genome_output": {
                        "process": "PREPARE_PRIMARY_GENOME:CUSTOM_GETCHROMSIZES",
                        "filetype": "sizes"
                    },
                    "description": "A tabulated file of chromosome names and lengths."
                },
                "target_genome_index": {
                    "name": "Genome STAR index",
                    "type": "file",
                    "pattern": "",
                    "required": false,
                    "genome_output": {
                        "process": "STAR_GENOMEGENERATE",
                        "filetype": ""
                    },
                    "description": "A genome index generated by STAR."
                },
                "smrna_genome_index": {
                    "name": "Small RNA Bowtie index",
                    "type": "file",
                    "pattern": "",
                    "required": false,
                    "genome_output": {
                        "process": "BOWTIE_BUILD",
                        "filetype": ""
                    },
                    "description": "A small RNA index for pre-mapping generated by Bowtie."
                },
                "smrna_fasta_fai": {
                    "name": "Small RNA FASTA index",
                    "type": "file",
                    "pattern": "fai$",
                    "required": false,
                    "genome_output": {
                        "process": "PREPARE_SMRNA_GENOME:CUSTOM_GETCHROMSIZES",
                        "filetype": "fai"
                    },
                    "description": "A small RNA FASTA file index generated by Samtools faidx."
                },
                "smrna_chrom_sizes": {
                    "name": "Small RNA lengths",
                    "type": "file",
                    "pattern": "sizes$",
                    "required": false,
                    "genome_output": {
                        "process": "PREPARE_SMRNA_GENOME:CUSTOM_GETCHROMSIZES",
                        "filetype": "sizes"
                    },
                    "description": "A tabulated file of small RNA names and lengths."
                },
                "longest_transcript": {
                    "name": "Longest transcript IDs",
                    "type": "file",
                    "pattern": "txt$",
                    "required": false,
                    "genome_output": {
                        "process": "CLIPSEQ_FIND_LONGEST_TRANSCRIPT",
                        "filetype": "txt"
                    },
                    "description": "A list of transcript IDs for the longest transcript for each gene in provided GTF annotation."
                },
                "longest_transcript_fai": {
                    "name": "Longest transcript IDs and lengths",
                    "type": "file",
                    "pattern": "fai$",
                    "required": false,
                    "genome_output": {
                        "process": "CLIPSEQ_FIND_LONGEST_TRANSCRIPT",
                        "filetype": "fai"
                    },
                    "description": "A tabulated file of transcript IDs and lengths for the longest transcript for each gene in provided GTF annotation."
                },
                "longest_transcript_gtf": {
                    "name": "Longest transcript IDs",
                    "type": "file",
                    "pattern": "gtf$",
                    "required": false,
                    "genome_output": {
                        "process": "CLIPSEQ_FIND_LONGEST_TRANSCRIPT",
                        "filetype": "gtf"
                    },
                    "description": "A list of transcript IDs for the longest transcript for each gene in provided GTF annotation."
                },
                "filtered_gtf": {
                    "name": "Filtered GTF",
                    "type": "file",
                    "pattern": "gtf$",
                    "required": false,
                    "genome_output": {
                        "process": "CLIPSEQ_FILTER_GTF",
                        "filetype": "gtf"
                    },
                    "description": "GTF filtered for 'basic' transcript tag and support levels TSL1 and TSL2 to improve performance of downstream tools."
                },
                "seg_gtf": {
                    "name": "Segmented GTF",
                    "type": "file",
                    "pattern": "gtf$",
                    "required": false,
                    "genome_output": {
                        "process": "ICOUNT_SEG_GTF",
                        "filetype": "gtf"
                    },
                    "description": "GTF segmented for use in iCount peak calling using iCount segment command."
                },
                "seg_filt_gtf": {
                    "name": "Segmented filtered GTF",
                    "type": "file",
                    "pattern": "gtf$",
                    "required": false,
                    "genome_output": {
                        "process": "ICOUNT_SEG_FILTGTF",
                        "filetype": "gtf"
                    },
                    "description": "Filtered GTF segmented for use in iCount peak calling using iCount segment command."
                },
                "seg_resolved_gtf": {
                    "name": "Segmented resolved filtered GTF",
                    "type": "file",
                    "pattern": "gtf$",
                    "required": false,
                    "genome_output": {
                        "process": "RESOLVE_UNANNOTATED",
                        "filetype": "gtf"
                    },
                    "description": "Filtered GTF segmented using iCount segment command and then resolve unannotated regions by overlapping transcript segments."
                },
                "seg_resolved_gtf_genic": {
                    "name": "Segmented resolved genic filtered GTF",
                    "type": "file",
                    "pattern": "gtf$",
                    "required": false,
                    "genome_output": {
                        "process": "RESOLVE_UNANNOTATED_GENIC_OTHER",
                        "filetype": "gtf"
                    },
                    "description": "Filtered GTF segmented using iCount segment command and then resolve unannotated regions by annotating as 'genic other'."
                },
                "regions_gtf": {
                    "name": "Regions GTF",
                    "type": "file",
                    "pattern": "gtf.gz$",
                    "required": false,
                    "genome_output": {
                        "process": "ICOUNT_SEG_GTF",
                        "filetype": "gtf.gz"
                    },
                    "description": "GTF regions for use in PEKA using iCount segment command."
                },
                "regions_filt_gtf": {
                    "name": "Filtered regions GTF",
                    "type": "file",
                    "pattern": "gtf.gz$",
                    "required": false,
                    "genome_output": {
                        "process": "ICOUNT_SEG_FILTGTF",
                        "filetype": "gtf.gz"
                    },
                    "description": "Filtered GTF regions for use in PEKA using iCount segment command."
                },
                "regions_resolved_gtf": {
                    "name": "Filtered resolved regions GTF",
                    "type": "file",
                    "pattern": "gtf$",
                    "required": false,
                    "genome_output": {
                        "process": "RESOLVE_UNANNOTATED_REGIONS",
                        "filetype": "gtf"
                    },
                    "description": "Filtered GTF regions using iCount segment command and then resolve unannotated regions by overlapping transcript segments."
                },
                "regions_resolved_gtf_genic": {
                    "name": "Filtered resolved regions genic GTF",
                    "type": "file",
                    "pattern": "gtf$",
                    "required": false,
                    "genome_output": {
                        "process": "RESOLVE_UNANNOTATED_GENIC_OTHER_REGIONS",
                        "filetype": "gtf"
                    },
                    "description": "Filtered GTF regions using iCount segment command and then resolve unannotated regions by annotating as 'genic other'."
                }
            }
        },
        "pipeline_options": {
            "name": "Settings",
            "description": "Additional pipeline configuration options.",
            "advanced": true,
            "properties": {
                "trim_length": {
                    "name": "Minimum trim length.",
                    "description": "Minimum length of read to keep after Trim Galore! trimming.",
                    "type": "number"
                },
                "move_umi_to_header": {
                    "name": "Extract UMI to header",
                    "description": "Runs UMI to header extraction based on the head format provided in UMI header format.",
                    "type": "boolean"
                },
                "umi_header_format": {
                    "name": "UMI header format",
                    "description": "Format of the UMI header to extract.",
                    "type": "string"
                },
                "skip_umi_dedupe": {
                    "name": "Skip UMI Deduplication",
                    "description": "Skip the UMI deduplication of BAMs.",
                    "type": "boolean"
                },
                "umi_separator": {
                    "name": "UMI Collapse seperator.",
                    "description": "The delimiter that UMICollapse uses to search for UMIs in the aligned reads.",
                    "type": "string",
                    "default": "rbc:"
                },
                "paraclu_min_value": {
                    "name": "Paraclu min value",
                    "description": "Omit clusters whose total data value is less than this minimum value.",
                    "type": "number"
                }
            }
        },
        "cli_options": {
            "name": "Command Line Options",
            "description": "Provide customised command line options to specific processes",
            "advanced": true,
            "properties": {
                "trimgalore_params": {
                    "name": "Trim Galore! parameters",
                    "description": "Parameters for Trim Galore! trimming. Defaults are -q 20 and minimum length 10 to keep reads.",
                    "type": "string"
                },
                "bowtie_params": {
                    "name": "Bowtie parameters",
                    "description": "Mapping parameters for Bowtie pre-mapping. Do not touch unless you know what you are doing!",
                    "type": "string"
                },
                "star_params": {
                    "name": "STAR parameters",
                    "description": "Mapping parameters for STAR mapping. Do not touch unless you know what you are doing!",
                    "type": "string"
                },
                "clippy_params": {
                    "name": "Clippy parameters",
                    "description": "Parameters for Clippy peak calling",
                    "type": "string"
                },
                "icount_peak_params": {
                    "name": "iCount peak parameters",
                    "description": "Parameters for iCount peak calling",
                    "type": "string"
                },
                "peka_params": {
                    "name": "PEKA parameters",
                    "description": "Parameters for PEKA K-mer enrichment analysis",
                    "type": "string"
                }
            }
        }
    },
    "outputs": [
        {
            "name": "Normalised genome crosslink bedgraph",
            "description": "Genomic crosslinks normalised to total sample crosslinks in bedgraph format for genome browser viewing.",
            "filetype": "bedgraph",
            "process": "CROSSLINK_NORMCOVERAGE"
        },
        {
            "name": "Genomic peaks",
            "description": "Genomic peaks generated by Clippy.",
            "filetype": "bed",
            "process": "CLIPPY_GENOME"
        },
        {
            "name": "Crosslink summary",
            "description": "Crosslinks summarised by gene, type (eg. CDS, intron) and subtype (eg. lncRNA, mRNA).",
            "filetype": "tsv",
            "process": "MERGE_SUMMARY"
        },
        {
            "name": "K-mer enrichment",
            "description": "K-mer enrichment motif analysis performed by PEKA. PDF file with graphs showing K-mer occurrence distributions around thresholded crosslink sites.",
            "filetype": "pdf",
            "process": "PEKA"
        },
        {
            "name": "Quality control report",
            "description": "MultiQC report of important quality control metrics.",
            "filetype": "html",
            "process": "MULTIQC"
        }
    ]
}
